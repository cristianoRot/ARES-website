<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ARES - Official Website</title>
    <link rel="stylesheet" href="style.css">
    <style>
        /* Card container - inizialmente nascosto */
        .card-container-image {
            opacity: 0;
            transform: translateX(0); /* Posizione iniziale al centro */
            transition: opacity 0.5s ease, transform 0.5s ease; /* Aggiungi transizioni per l'animazione */
        }

        /* Animazione quando il blocco è visibile, fai comparire l'immagine da sinistra o da destra */
        .card-container-1 .card-container-image {
            transform: translateX(-100%); /* Posizione iniziale a sinistra */
        }

        .card-container-2 .card-container-image {
            transform: translateX(100%); /* Posizione iniziale a destra */
        }

        /* Quando il blocco è visibile, fai comparire l'immagine da sinistra o da destra */
        .card-container-image.visible-from-left {
            opacity: 1;
            transform: translateX(0); /* Viene alla posizione normale */
        }

        .card-container-image.visible-from-right {
            opacity: 1;
            transform: translateX(0); /* Viene alla posizione normale */
        }

        /* Animazione per il lato destro */
        .card-container-image.right-side {
            transform: translateX(100%); /* Posizione iniziale a destra */
        }
    </style>
</head>

<body>
    <div id="hero-section"></div>

    <div id="info-section"></div>

    <div class="card-container-1">
        <!-- Image Section -->
        <div class="card-container-image">
            <img src="images/characters_image.jpg" alt="Map Image" style="max-width: 100%;" />
        </div>
        <!-- Information Section -->
        <div class="card-container-description">
            <div class="title">CHARACTERS</div>
            <p style="margin-bottom: 20px;">
                Discover an incredible selection of skins designed to showcase your personality on the
                battlefield. With Ares, every style choice is
                a unique opportunity to stand out and conquer every battle with unmatched flair.
            </p>
            <button class="button">
                <span class="text_button">
                    Learn more
                </span>
            </button>
        </div>
    </div>

    <div class="card-container-2">
        <!-- Information Section -->
        <div class="card-container-description">
            <div class="title">MAPS</div>
            <p style="margin-bottom: 20px;">
                Discover the breathtaking universe of <strong>ARES</strong>, where realistic maps redefine the
                way battles unfold. Dive into
                stunningly detailed environments and dynamic visuals that push the boundaries of immersion and
                excitement.
            </p>
            <button class="button">
                <span class="text_button">
                    Learn more
                </span>
            </button>
        </div>
        <!-- Image Section -->
        <div class="card-container-image">
            <img src="images/map_image0.jpg" alt="Map Image" style="max-width: 100%;" />
        </div>
    </div>

    <div class="card-container-1">
        <!-- Image Section -->
        <div class="card-container-image">
            <img src="images/GunCustomization.jpg" alt="Map Image" style="max-width: 100%;" />
        </div>
        <!-- Information Section -->
        <div class="card-container-description">
            <div class="title">CUSTOMIZE</div>
            <p style="margin-bottom: 20px;">
                Customize your arsenal to match your playstyle. From tactical upgrades to unique designs, create
                weapons that are as powerful as
                they are personal. Your battlefield, your rules!
            </p>
            <button class="button">
                <span class="text_button">
                    Learn more
                </span>
            </button>
        </div>
    </div>

    <div id="footer-container"></div>

    <div class="popup-view">
        <form class="popup" id="popup">
            <button type="button" class="exitBtn" onclick="closePopup()">×</button>
            <div class="popup-heading">BETA ACCESS.</div>
            <p class="popup-subheading">By entering your email, you will be added to the queue for the Ares test. We will send you an email with instructions on how to try the game.</p>
            <div class="inputContainer">
                <input placeholder="Enter your name" type="text" name="name" id="name" />
                <input placeholder="Enter your email" type="email" name="email" id="email" />
                <button type="submit" class="submitButton" id="submitButton" onclick="submitEmail(event)">SIGN UP</button>
            </div>
            <!-- Area di caricamento -->
            <div id="loader-bar" class="loader" style="display: none;">
                <div class="circle"></div>
                <div class="circle"></div>
                <div class="circle"></div>
                <div class="shadow"></div>
                <div class="shadow"></div>
                <div class="shadow"></div>
            </div>
        </form>
        <div id="popup-success" class="popup-message" style="display: none;">
            <button type="button" class="exitBtn" onclick="closePopup()">×</button>
            <div class="title" style="color: hsl(163, 87%, 44%);">
                SUCCESS
            </div>
            <div class="subtitle">You will receive an email with further instructions.</div>
        </div>
        <div id="popup-failed" class="popup-message" style="display: none;">
            <button type="button" class="exitBtn" onclick="closePopup()">×</button>
            <div class="title" style="color: hsl(0, 87%, 44%);">
                ERROR
            </div>
            <div class="subtitle">You will receive an email with further instructions.</div>
        </div>
    
    </div>

    <script defer>
        function loadComponent() {
            fetch('pages/hero-section/hero-section.html')
                .then(response => response.text())
                .then(data => {
                    document.getElementById('hero-section').innerHTML = data;
                })
                .catch(error => console.error('Error while loading hero-section:', error));

            fetch('pages/info-section/info-section.html')
                .then(response => response.text())
                .then(data => {
                    document.getElementById('info-section').innerHTML = data;
                })
                .catch(error => console.error('Error while loading info-section:', error));

            fetch('pages/footer/footer.html')
                .then(response => response.text())
                .then(data => {
                    document.getElementById('footer-container').innerHTML = data;
                })
                .catch(error => console.error('Error while loading footer:', error));
        }

        document.addEventListener('DOMContentLoaded', loadComponent);
        
        document.addEventListener('DOMContentLoaded', function() {
            // Funzione per osservare quando i blocchi entrano nel viewport
            const observer = new IntersectionObserver((entries, observer) => {
                entries.forEach(entry => {
                    // Se l'elemento è visibile
                    if (entry.isIntersecting) {
                        // Aggiungi la classe appropriata in base alla posizione del blocco
                        if (entry.target.classList.contains('card-container-1')) {
                            entry.target.querySelector('.card-container-image').classList.add('visible-from-left');
                        } else {
                            entry.target.querySelector('.card-container-image').classList.add('visible-from-right');
                        }
                        observer.unobserve(entry.target); // Non osservare più l'elemento dopo che è visibile
                    }
                });
            }, { threshold: 0.3 }); // Quando il 30% dell'elemento è visibile

            // Osserviamo tutte le card-container
            document.querySelectorAll('.card-container-1, .card-container-2').forEach(container => {
                observer.observe(container); // Iniziamo a osservare ciascun container
            });
        });

        function openPopup() {
            popupReset();
            document.body.classList.add('popup-active');
            document.querySelector('.popup-view').classList.add('active');
        }

        function closePopup() {
            document.body.classList.remove('popup-active');
            document.querySelector('.popup-view').classList.remove('active');
        }

        function submitEmail(event) {
            event.preventDefault(); // Previene il comportamento di default del form

            let emailInput = document.getElementById('email');
            let nameInput = document.getElementById('name');

            if (emailInput instanceof HTMLInputElement && nameInput instanceof HTMLInputElement) {
                let email = emailInput.value.trim();
                let name = nameInput.value.trim();

                if (email !== '' && name !== '') {
                    popupLoading();

                    let body = `email=${encodeURIComponent(email)}&name=${encodeURIComponent(name)}`;

                    fetch("https://script.google.com/macros/s/AKfycbwk2Y3NK5rzZaVB6KbOTYfcG5QUM8ir1Qk-cGv48SkjYCtVnc9WRWx2sCg3ahOu_Qbv/exec", {
                        method: "POST",
                        headers: {
                            "Content-Type": "application/x-www-form-urlencoded"
                        },
                        body: body
                    })
                    .then(response => response.json())
                    .then(data => {
                        if (data.result === "success") {
                            popupSuccess();
                            emailInput.value = '';
                            nameInput.value = '';
                        } else {
                            popupFailed();
                            console.error('Error:', data.error);
                        }
                    })
                    .catch(error => {
                        popupFailed();
                        console.error('Error:', error);
                    });
                } else {
                    alert('Please enter both a valid name and email.');
                }
            }
        }

        function popupReset() {
            let popup = document.getElementById('popup');
            let popupSuccess = document.getElementById('popup-success');
            let popupFailed = document.getElementById('popup-failed');
            let emailInput = document.getElementById('email');
            let nameInput = document.getElementById('name');
            let loader = document.getElementById('loader-bar');
            let submitButton = document.getElementById('submitButton');

            popup.style.display = 'block'
            popupSuccess.style.display = 'none'
            popupFailed.style.display = 'none'
            emailInput.style.display = 'block'
            nameInput.style.display = 'block'
            loader.style.display = 'none';
            submitButton.style.display = 'block'; 
        }

        function popupLoading() {
            let emailInput = document.getElementById('email');
            let nameInput = document.getElementById('name');
            let loader = document.getElementById('loader-bar');
            let submitButton = document.getElementById('submitButton');

            emailInput.style.display = 'none'
            nameInput.style.display = 'none'
            loader.style.display = 'block';
            submitButton.style.display = 'none';  
        }

        function popupSuccess() {
            let popup = document.getElementById('popup');
            let popupSuccess = document.getElementById('popup-success');

            popup.style.display = 'none';
            popupSuccess.style.display = 'block'
        }

        function popupFailed() {
            let popup = document.getElementById('popup');
            let popupFailed = document.getElementById('popup-failed');

            popup.style.display = 'none';
            popupFailed.style.display = 'block'
        }
    </script>
</body>

</html>